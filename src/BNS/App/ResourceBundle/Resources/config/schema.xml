<?xml version="1.0" encoding="UTF-8"?>

<database defaultIdMethod="native" defaultPhpNamingMethod="phpname" name="app" namespace="BNS\App\ResourceBundle\Model">
  <table name="resource">
    <column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="label" required="true" size="255" type="VARCHAR" primaryString="true" />
    <column name="description" type="LONGVARCHAR" />
    <column name="lang" required="true" size="15" type="VARCHAR" />
    <column name="type_unique_name" type="ENUM" valueSet="IMAGE, VIDEO, DOCUMENT, AUDIO, LINK, EMBEDDED_VIDEO, FILE"  />
	<column name="value" type="LONGVARCHAR" />
	<column name="filename" size="255" type="VARCHAR" />
	<column name="file_mime_type" size="255" type="VARCHAR" />
	<column name="status_deletion" required="true" type="INTEGER" size="2" default="1"/>
	<column name="status_creation" required="true" type="INTEGER" size="2" default="1"/>
    <column name="user_id" required="true" type="INTEGER" />
    <foreign-key foreignTable="user" name="fk_resource_user1">
      <reference foreign="id" local="user_id" />
    </foreign-key>
    <index name="fk_resource_user1">
      <index-column name="user_id" />
    </index>
	<behavior name="sluggable" />
	<behavior name="timestampable" />

	<vendor type="mysql">
		<parameter name="Engine" value="InnoDB"/>
		<parameter name="Charset" value="utf8"/>
		<parameter name="Collate" value="utf8_general_ci"/>
	</vendor>
  </table>
  <table name="resource_favorites">
    <column name="resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="user_id" primaryKey="true" required="true" type="INTEGER" />
    <foreign-key foreignTable="resource" name="fk_resource_has_user_resource1">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <foreign-key foreignTable="user" name="fk_resource_has_user_user1">
      <reference foreign="id" local="user_id" />
    </foreign-key>
    <index name="fk_resource_has_user_user1">
      <index-column name="user_id" />
    </index>
    <index name="fk_resource_has_user_resource1">
      <index-column name="resource_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_white_list">
    <column name="resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="group_id" primaryKey="true" required="true" type="INTEGER" />
    <foreign-key foreignTable="resource" name="fk_resource_white_list_resource">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <foreign-key foreignTable="group" name="fk_resource_white_list_group">
      <reference foreign="id" local="group_id" />
    </foreign-key>
    <index name="fk_resource_white_list_group_index">
      <index-column name="group_id" />
    </index>
    <index name="fk_resource_white_list_resource_index">
      <index-column name="resource_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_label_group">
    <column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="label" required="true" size="255" type="VARCHAR" />
	<column name="group_id" required="true" type="INTEGER" />
	<column name="is_user_folder" required="true" type="BOOLEAN" default="0"/>
	<behavior name="nested_set">
		<parameter name="use_scope" value="true" />
		<parameter name="scope_column" value="group_id" />
	</behavior>
	<foreign-key foreignTable="group" onDelete="cascade">
		<reference local="group_id" foreign="id" />
	</foreign-key>
	<behavior name="timestampable" />
  </table>
  <table name="resource_label_user">
    <column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="label" required="true" size="255" type="VARCHAR" />
	<column name="user_id" required="true" type="INTEGER" />
	<behavior name="nested_set">
		<parameter name="use_scope" value="true" />
		<parameter name="scope_column" value="user_id" />
	</behavior>
	<foreign-key foreignTable="user" onDelete="cascade">
		<reference local="user_id" foreign="id" />
	</foreign-key>
	<behavior name="timestampable" />
  </table>
  <table name="resource_catalog">
    <column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="label" required="true" size="255" type="VARCHAR" />
    <column name="description" type="LONGVARCHAR" />
	<behavior name="i18n">
		<parameter name="i18n_columns" value="label, description" />
	</behavior>
	<behavior name="sluggable" />
	<behavior name="timestampable" />
  </table>
  <table name="resource_link_catalog">
    <column name="resource_catalog_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="reference" required="true" size="255" type="VARCHAR" />
    <foreign-key foreignTable="resource_catalog" name="fk_catalog_has_resource_catalog1" onDelete="cascade">
      <reference foreign="id" local="resource_catalog_id" />
    </foreign-key>
    <foreign-key foreignTable="resource" name="fk_catalog_has_resource_resource1" onDelete="cascade">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <index name="fk_catalog_has_resource_resource1">
      <index-column name="resource_id" />
    </index>
    <index name="fk_catalog_has_resource_catalog1">
      <index-column name="resource_catalog_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_link_group">
    <column name="resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_label_group_id" primaryKey="true" required="true" type="INTEGER" />
	<column name="status" required="true" type="INTEGER" default="1"/>
	<column name="is_strong_link" required="true" type="BOOLEAN" default="0"/>
    <foreign-key foreignTable="resource" name="fk_resource_has_resource_label_group_resource1" onDelete="cascade">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <foreign-key foreignTable="resource_label_group" name="fk_resource_has_resource_label_group_resource_label_group1" onDelete="cascade">
      <reference foreign="id" local="resource_label_group_id" />
    </foreign-key>
    <index name="fk_resource_has_resource_label_group_resource_label_group1">
      <index-column name="resource_label_group_id" />
    </index>
    <index name="fk_resource_has_resource_label_group_resource1">
      <index-column name="resource_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_link_user">
    <column name="resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_label_user_id" primaryKey="true" required="true" type="INTEGER" />
	<column name="status" required="true" type="INTEGER" default="1"/>
	<column name="is_strong_link" required="true" type="BOOLEAN" default="0"/>
    <foreign-key foreignTable="resource" name="fk_resource_has_resource_label_user_resource1" onDelete="cascade">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <foreign-key foreignTable="resource_label_user" name="fk_resource_has_resource_label_user_resource_label_user1" onDelete="cascade">
      <reference foreign="id" local="resource_label_user_id" />
    </foreign-key>
    <index name="fk_resource_has_resource_label_user_resource_label_user1">
      <index-column name="resource_label_user_id" />
    </index>
    <index name="fk_resource_has_resource_label_user_resource1">
      <index-column name="resource_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_internet_search">
	<column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="user_id" required="true" type="INTEGER" />
	<column name="label" required="true" size="255" type="VARCHAR" />
    <foreign-key foreignTable="user" name="resource_internet_search_user" onDelete="cascade">
      <reference foreign="id" local="user_id" />
    </foreign-key>
    <index name="resource_internet_search_user_index">
      <index-column name="user_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_join_object">
	<column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_id" required="true" type="INTEGER" />
    <column name="object_id" required="true" type="INTEGER" />
	<column name="object_class" primaryKey="true" required="true" size="255" type="VARCHAR" />
    <foreign-key foreignTable="resource" name="fk_resource_has_resource_join_object1" onDelete="cascade">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <index name="fk_resource_has_resource_join_object1">
      <index-column name="resource_id" />
    </index>
	<index name="fk_object_has_resource_join_object1">
      <index-column name="object_id" />
    </index>
	<index name="fk_object_class_has_resource_join_object1">
      <index-column name="object_class" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_join_object_links">
    <column name="id" autoIncrement="true" primaryKey="true" required="true" type="INTEGER" />
	<column name="resource_join_object_id" primaryKey="true" required="true" type="INTEGER" />
	<column name="user_id" required="false" type="INTEGER" />
	<column name="group_id" required="false" type="INTEGER" />
    <foreign-key foreignTable="resource_join_object" name="FK_resource_join_object" onDelete="cascade">
      <reference foreign="id" local="resource_join_object_id" />
    </foreign-key>
	<foreign-key foreignTable="user" name="FK_user" onDelete="cascade">
      <reference foreign="id" local="user_id" />
    </foreign-key>
	<foreign-key foreignTable="group" name="FK_group" onDelete="cascade">
      <reference foreign="id" local="group_id" />
    </foreign-key>
  </table>
  <table name="resource_scolomfr_code">
    <column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="true_value" required="true" type="BOOLEAN" />
    <column name="label" required="true" size="255" type="VARCHAR" />
  </table>
  <table name="resource_scolomfr_code_value">
    <column autoIncrement="true" name="id" primaryKey="true" required="true" type="INTEGER" />
    <column name="value" required="true" size="255" type="VARCHAR" />
    <column name="resource_scolomfr_code_id" required="true" type="INTEGER" />
    <foreign-key foreignTable="resource_scolomfr_code" name="fk_scolomfr_code_value_scolomfr_code1">
      <reference foreign="id" local="resource_scolomfr_code_id" />
    </foreign-key>
    <index name="fk_scolomfr_code_value_scolomfr_code1">
      <index-column name="resource_scolomfr_code_id" />
    </index>
  </table>
  <table name="resource_scolomfr_value">
    <column name="resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_scolomfr_code_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="value" type="LONGVARCHAR" />
    <foreign-key foreignTable="resource" name="fk_resource_has_scolomfr_code_resource1">
      <reference foreign="id" local="resource_id" />
    </foreign-key>
    <foreign-key foreignTable="resource_scolomfr_code" name="fk_resource_has_scolomfr_code_scolomfr_code1">
      <reference foreign="id" local="resource_scolomfr_code_id" />
    </foreign-key>
    <index name="fk_resource_has_scolomfr_code_scolomfr_code1">
      <index-column name="resource_scolomfr_code_id" />
    </index>
    <index name="fk_resource_has_scolomfr_code_resource1">
      <index-column name="resource_id" />
    </index>
	<behavior name="timestampable" />
  </table>
  <table name="resource_scolomfr_coded_value">
    <column name="resource_scolomfr_value_resource_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_scolomfr_value_scolomfr_code_id" primaryKey="true" required="true" type="INTEGER" />
    <column name="resource_scolomfr_code_value_id" primaryKey="true" required="true" type="INTEGER" />
    <foreign-key foreignTable="resource_scolomfr_value" name="fk_resource_scolomfr_value_has_scolomfr_code_value_resource_s1">
      <reference foreign="resource_id" local="resource_scolomfr_value_resource_id" />
      <reference foreign="resource_scolomfr_code_id" local="resource_scolomfr_value_scolomfr_code_id" />
    </foreign-key>
    <foreign-key foreignTable="resource_scolomfr_code_value" name="fk_resource_scolomfr_value_has_scolomfr_code_value_scolomfr_c1">
      <reference foreign="id" local="resource_scolomfr_code_value_id" />
    </foreign-key>
    <index name="fk_resource_scolomfr_value_has_scolomfr_code_value_scolomfr_c1">
      <index-column name="resource_scolomfr_code_value_id" />
    </index>
    <index name="fk_resource_scolomfr_value_has_scolomfr_code_value_resource_s1">
      <index-column name="resource_scolomfr_value_resource_id" />
      <index-column name="resource_scolomfr_value_scolomfr_code_id" />
    </index>
	<behavior name="timestampable" />
  </table>
</database>